=========================================================
ПЛАН РАБОТ ПО РАЗВЕРТЫВАНИЮ ocean-prime-website
=========================================================

---ы
ЧАСТЬ 1: ИСТОРИЯ И ПОДГОТОВКА СЕРВЕРА (ЗАВЕРШЕНО)
---

[✓] 1. Анализ первоначальной задачи
    - Цель: Развернуть сайт на хостинге без Docker, согласно инструкции `DEPLOY_SHARED_HOSTING copy.md`.
    - Результат: Выяснилось, что сервер является чистой виртуальной машиной (VPS), а не готовым хостингом.

[✓] 2. Смена стратегии развертывания
    - Принято решение отказаться от установки "на голое железо".
    - Новая цель: Развернуть проект с помощью Docker, по аналогии с эталонным проектом `ref`.

[✓] 3. Переустановка и подготовка сервера
    - На сервер установлена чистая операционная система Ubuntu 22.04 LTS, как идеальная основа для Docker.
    - Восстановлен доступ к свежеустановленному серверу по SSH.


ЧАСТЬ 2: НАСТРОЙКА СЕРВЕРА И DOCKER (ТЕКУЩИЕ ЗАДАЧИ)


[✓] 1. Установка Docker и Docker Compose
    - Задача: Установить на чистый сервер Docker Engine и плагин Docker Compose.
    - Результат: Сервер готов к работе с контейнерами.

[✓] 2. Настройка брандмауэра (UFW)
    - Задача: Открыть порты для SSH (22), HTTP (80) и HTTPS (443), чтобы к сайту был доступ извне.
    - Результат: Сервер защищен и доступен по нужным портам.


ЧАСТЬ 3: АДАПТАЦИЯ И НАСТРОЙКА DOCKER-ОКРУЖЕНИЯ


[✓] 1. Создание структуры проекта на сервере
    - Задача: Создать на сервере директорию для проекта (например, `/var/www/ocean-prime`) и загрузить туда исходный код.

[✓] 2. Подготовка конфигурационных файлов (локально)
    - Задача: На основе файлов из проекта `ref`, создать и настроить конфигурацию для `ocean-prime`:
        - `docker-compose.yml`: адаптировать имена сервисов, сетей, доменов.
        - `Dockerfile`: убедиться, что он подходит для нового проекта.
        - `.env.example`: создан и добавлен в репозиторий.
        - Конфигурации для `Nginx` и `Traefik` адаптированы.

[✓] 3. Попытка настройки на сервере и выявление проблемы
    - Задача: Создать файл `.env` на сервере.
    - Результат: Обнаружена ошибка `cp: ... .env.example': Нет такого файла или каталога`.
    - Причина: Файл `.env.example` отсутствовал в репозитории.
    - Решение: Файл был создан локально и добавлен в Git.

[✓] 4. Первый запуск и сборка
    - Задача: Выполнить команду `docker compose up --build -d` для сборки образа и запуска всех сервисов.
    - Результат: Образы успешно собраны, контейнеры созданы.
    - Обнаружены ошибки:
        - **Критическая:** Контейнер `app` ушел в цикл перезагрузки (`Container is restarting`).
        - **Предупреждение:** Docker Compose не видит переменные из `.env` файла (`The "DOMAIN" variable is not set`).


---
ЧАСТЬ 4: РАЗВЕРТЫВАНИЕ ПРИЛОЖЕНИЯ ВНУТРИ DOCKER
---

[ ] 1. Исправление конфигурации Docker и стабильный запуск
    - Задача: Внести изменения в `docker-compose.yml`, чтобы контейнер `app` не падал и чтобы загружались переменные из `.env`.

[ ] 2. Финальная настройка October CMS (после стабильного запуска)
    - Задача: Внутри работающего PHP-контейнера выполнить команды:
        - `composer install` (установка PHP-библиотек).
        - `php artisan october:up` (создание таблиц в базе данных).
        - Настройка прав на папки `storage/` и `bootstrap/cache`.

[ ] 3. Финальная проверка
    - Задача: Открыть сайт в браузере и убедиться, что он корректно работает.
s